# ディレクトリ構成

## 構成図

```
youtube_transcriber/
├── youtube_transcriber.py          # メインスクリプト。YouTube音声のダウンロード、文字起こし、修正、翻訳、要約処理を行う
├── requirements.txt                # 必要なライブラリを記載したファイル
├── README.md                       # プロジェクトの概要や使い方を記載した説明ファイル
├── prompts/                        # LLMへの指示（プロンプト）を記述したファイルを格納
│   ├── system_prompt.txt           # 要約処理で使用するシステムプロンプト
│   └── system_prompt_refine.txt    # 文字起こし修正処理で使用するシステムプロンプト
├── output/
│   └── {タイムスタンプ}/
│       ├── audio.mp3               # ダウンロードした音声ファイル
│       ├── transcript.txt          # Whisperによる元の文字起こし結果
│       ├── transcript_refined.txt  # LLMによる修正後の文字起こし結果
│       ├── transcript_{lang}.txt   # 任意の言語で翻訳された文字起こし（例: transcript_ja.txt、LLM修正後のテキストを翻訳）
│       ├── summary.txt             # Gemini APIによるテキストの要約結果
│       └── video_info.json         # 入力したURLに関する情報を保存するファイル
└── venv/                           # Pythonの仮想環境（通常はGit管理対象外）
```

## 説明

### 各ファイルとフォルダの詳細

#### 1. `youtube_transcriber.py`

- **役割**: プロジェクトのメインスクリプトで、YouTube 動画の音声をダウンロードし、文字起こし、LLM による修正、翻訳、そして要約を行います。
- **主な機能**:
  - YouTube の URL を受け取り、音声データをダウンロードする。
  - ダウンロードした音声を Whisper モデルでテキストに変換する。
  - 文字起こし結果を Gemini API を用いて修正する。
  - 修正された文字起こしテキストが日本語以外の場合、指定された言語に翻訳し、翻訳結果を保存する。
  - 修正された文字起こしテキストを Gemini API を用いて要約し、要約結果を保存する。

#### 2. `requirements.txt`

- **役割**: プロジェクトを実行するために必要な Python ライブラリとそのバージョンをリスト形式で記述したファイルです。`pip install -r requirements.txt` コマンドでこれらのライブラリを一括インストールするために使用されます。

#### 3. `README.md`

- **役割**: プロジェクトの概要、機能、実行方法、注意事項、貢献方法などを Markdown 形式で記述した説明ファイルです。このファイルを読むことで、プロジェクトの利用者はプロジェクトの内容を理解し、適切に利用することができます。

#### 4. `prompts/`

- **役割**: 大規模言語モデル (LLM) である Gemini API に対する指示やガイドラインを記述したテキストファイルを格納するフォルダです。これらのプロンプトファイルによって、LLM がどのようにテキストを処理・生成するかが制御されます。
  - **`system_prompt.txt`**: テキストの要約処理を行う際に、Gemini API に与えるシステムプロンプトを記述します。これにより、要約のスタイルや重点などを指示します。
  - **`system_prompt_refine.txt`**: 文字起こしテキストの修正処理を行う際に、Gemini API に与えるシステムプロンプトを記述します。これにより、LLM がどのように文字起こしミスを修正するかの指示を行います。

### 出力フォルダ (`output/{タイムスタンプ}/`)

- タイムスタンプに基づいたフォルダが作成され、特定の YouTube 動画の処理によって生成されたすべての出力ファイルが一か所に整理して保存されます。
  - 例: 2024 年 1 月 2 日 3 時 4 分 5 秒に入力を受け取った場合、`output/20240102030405/`

#### 各出力ファイルの詳細

- `audio.mp3`

  - **役割**: ダウンロードした YouTube 動画の音声ファイル。
  - **形式**: `.mp3`形式。

- `transcript.txt`

  - **役割**: Whisper による元の文字起こし結果を保存します。
  - **内容**: 動画の音声内容をテキスト形式で記録します。このファイルには、文字起こしミスなどが含まれている場合があります。

- `transcript_refined.txt`

  - **役割**: Gemini API によって修正された文字起こし結果を保存します。
  - **内容**: 元の文字起こし結果 (`transcript.txt`) をもとに、不自然な言い回しや誤字脱字などが修正された、より自然で読みやすいテキストが記録されます。

- `transcript_{lang}.txt`

  - **役割**: 指定された言語への翻訳結果を保存します。
  - **命名規則**: `{lang}`部分に翻訳言語のコード（例：ja, en, fr）が入ります。
  - **内容**: **LLM によって修正された文字起こし結果 (`transcript_refined.txt`)** を指定の言語に翻訳したテキストが記録されます。
  - **例**: 日本語の翻訳ファイルは`transcript_ja.txt`、英語の翻訳ファイルは`transcript_en.txt`として保存されます。

- `summary.txt`

  - **役割**: Gemini API を用いて、**LLM によって修正された文字起こし結果 (`transcript_refined.txt`)** を要約した結果を保存します。
  - **内容**: 動画の内容を簡潔にまとめたテキストが記録されます。

- `video_info.json`
  - **役割**: 入力した YouTube URL と動画のタイトルを保存するファイル。
  - **内容**: 以下の情報を JSON 形式で保存します。
    - `url`: 入力された YouTube の URL
    - `title`: 動画のタイトル

#### 5. `venv/`

- **役割**: Python の仮想環境を作成するためのフォルダです。仮想環境内にプロジェクト固有のライブラリをインストールすることで、システム全体の Python 環境とプロジェクト環境を分離し、依存関係の競合を防ぎます。通常、このフォルダはバージョン管理システム (Git など) の管理対象外とされます。
